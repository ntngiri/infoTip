$.fn.tooltip=function(a){function b(a,b){this.toolTipCont.css({left:a,top:b})}function c(a){this.toolTipCont.find("em").removeClass().addClass("arrow-leftC"),b.call(this,a.rigthDir_LeftPos,a.nodeTop-a.tooltipHt/2),this.toolTipCont.removeClass(a.animatnGrp[0],a.animatnGrp[2],a.animatnGrp[3]).addClass(a.animatnGrp[1])}function d(a){this.toolTipCont.find("em").removeClass().addClass("arrow-upC"),b.call(this,a.nodeLeft-a.tooltipWdth/2+a.nodeWidth/2,a.bottomDir_topPos+a.ttTipHeight),this.toolTipCont.removeClass(a.animatnGrp[0],a.animatnGrp[1],a.animatnGrp[3]).addClass(a.animatnGrp[2])}function e(a){this.toolTipCont.find("em").removeClass().addClass("arrow-rightC"),b.call(this,a.leftDir_leftPos,a.nodeTop-a.tooltipHt/2),this.toolTipCont.removeClass(a.animatnGrp[0],a.animatnGrp[2],a.animatnGrp[1]).addClass(a.animatnGrp[3])}function f(a){this.toolTipCont.find("em").removeClass().addClass("arrow-downC"),b.call(this,a.nodeLeft-a.tooltipWdth/2+a.nodeWidth/2,a.topDir_topPos-a.ttTipHeight),this.toolTipCont.removeClass(a.animatnGrp[1],a.animatnGrp[2],a.animatnGrp[3]).addClass(a.animatnGrp[0])}function g(b){return b.horizontal_distance>=b.tooltipWdth&&b.nodeTop-(a(window).scrollTop()+b.wrapperTop)>b.tooltipHt&&b.vertical_distance>=b.tooltipHt?(c.call(this,b),!0):!1}function h(a){return a.vertical_distance>=a.tooltipHt?(d.call(this,a),!0):!1}function j(b){return b.nodeLeft-b.viewportLeft>=b.tooltipWdth&&b.nodeTop-(a(window).scrollTop()+b.wrapperTop)>b.tooltipHt&&b.vertical_distance>=b.tooltipHt?(e.call(this,b),!0):!1}function k(b){return b.nodeTop-(a(window).scrollTop()+b.wrapperTop)>b.tooltipHt?(f.call(this,b),!0):!1}var l=["top","right","bottom","left"],m=null,n={list:{},"class":"tooltipDflt",dir:"right",tipWidth:20,tipHeight:20,wrapper:"body",open:{event:"mouseover",anim:""},close:{event:"mouseleave",node:"",anim:""}},o=function(b){this.options=a.extend(!0,{},n,b)},p=function(a,b){return"top"==a?k.call(this,b):"right"==a?g.call(this,b):"bottom"==a?h.call(this,b):"left"==a?j.call(this,b):void 0},q=function(b,c){var d=p.call(this,b,c);if(d)return d;var e=a.inArray(b,l),f=(e+1)%l.length,g=a.inArray(this.options.dir,l);return f==g?!0:void q.call(this,l[f],c)},r=function(){var b=this.options.open.event,c=this.options.close.event,d=this.options.close.node,e=this.toolTipCont=a('<div class="tooltipContainer">');e.appendTo("body");var f=this.options["class"],g=f.replace(/\,/g," ");e.addClass(g);var h=this;this.node.on(b,function(){h.open()}),this.node.on(c,function(){var a=0;h.toolTipCont.on("mouseenter",function(){a=1}),setTimeout(function(){a?h.toolTipCont.on("mouseleave",function(){h.close()}):h.close()},100)}),d&&this.node.on("click",d,function(){h.close()})},s={open:function(){{var b={};a(".tooltipContainer")}b.ttDirection=this.options.dir;var c=this.options.open.anim,d=b.animatnGrp=c.split(",");if(1==d.length)for(i=0;i<3;i++)d.push(c);b.wrapElem=a(this.options.wrapper);var e=b.wrapElem.offset();b.wrapperLeft=e.left,b.wrapperTop=e.top,b.wrapperHt=b.wrapElem.height(),b.ttTipWidth=this.options.tipWidth,b.ttTipHeight=this.options.tipHeight;var f=this.node.attr("tooltip"),g=this.options.list[f];a(this.toolTipCont).css("max-width",a(window).width()/2);var h=this.toolTipCont;b.nodeHeight=this.node.outerHeight(),b.nodeWidth=this.node.outerWidth();var j=this.node.offset();b.nodeLeft=j.left,b.nodeTop=j.top,h.html(g).show(),b.tooltipHt=h.height(),b.tooltipOuterHt=h.outerHeight(),b.tooltipWdth=h.outerWidth(),b.rigthDir_LeftPos=b.nodeLeft+b.nodeWidth+b.ttTipWidth,b.topDir_topPos=b.nodeTop-b.tooltipOuterHt,b.leftDir_leftPos=b.nodeLeft-b.tooltipWdth-b.ttTipWidth,b.bottomDir_topPos=b.nodeTop+b.nodeHeight;var k=this.node.offset().left,l=this.node.offset().top,n=k+this.node.outerWidth(),o=l+this.node.outerHeight(),p=a(window).width()+a(window).scrollLeft(),r=a(window).height()+a(window).scrollTop();b.viewportLeft=a(window).width()-a(window).scrollLeft()-k,b.horizontal_distance=p-n,b.vertical_distance=r-o;q.call(this,b.ttDirection,b),m?m.close():"",h.fadeIn(),m=this},close:function(){this.toolTipCont.hide()}},t=function(a,b){o.call(this,a),this.node=b,r.call(this)};return t.prototype=s,function(b){return a.each(this,function(c,d){if(!a(d).data("tooltip")){var e=new t(b,a(d));a(d).data("tooltip",e)}}),this.data("tooltip")}}(jQuery);