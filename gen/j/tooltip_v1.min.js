$.fn.tooltip=function(a){function b(a,b){this.toolTipCont.css({left:a,top:b})}function c(a){this.toolTipCont.find("em").removeClass().addClass("arrow-leftC"),b.call(this,a.rigthDir_LeftPos,a.nodeTop-a.tooltipHt/2),this.toolTipCont.removeClass(a.animatnGrp[0],a.animatnGrp[2],a.animatnGrp[3]).addClass(a.animatnGrp[1])}function d(a){this.toolTipCont.find("em").removeClass().addClass("arrow-upC"),b.call(this,a.nodeLeft-a.tooltipWdth/2+a.nodeWidth/2,a.bottomDir_topPos+a.ttTipHeight),this.toolTipCont.removeClass(a.animatnGrp[0],a.animatnGrp[1],a.animatnGrp[3]).addClass(a.animatnGrp[2])}function e(a){this.toolTipCont.find("em").removeClass().addClass("arrow-rightC"),b.call(this,a.leftDir_leftPos,a.nodeTop-a.tooltipHt/2),this.toolTipCont.removeClass(a.animatnGrp[0],a.animatnGrp[2],a.animatnGrp[1]).addClass(a.animatnGrp[3])}function f(a){this.toolTipCont.find("em").removeClass().addClass("arrow-downC"),b.call(this,a.nodeLeft-a.tooltipWdth/2+a.nodeWidth/2,a.topDir_topPos-a.ttTipHeight),this.toolTipCont.removeClass(a.animatnGrp[1],a.animatnGrp[2],a.animatnGrp[3]).addClass(a.animatnGrp[0])}function g(b){return b.counter<=l.length?b.wrapperWd-(b.nodeLeft-b.wrapperLeft-b.nodeWidth)>=b.tooltipWdth&&b.horizontal_distance>=b.tooltipWdth&&b.nodeTop-(a(window).scrollTop()+b.wrapperTop)>b.tooltipHt&&b.vertical_distance>=b.tooltipHt?(c.call(this,b),!0):(b.counter++,!1):(c.call(this,b),!0)}function h(a){return a.counter<=l.length?a.wrapperHt-(a.nodeTop+a.nodeHeight)>=a.tooltipHt&&a.vertical_distance>=a.tooltipHt&&a.viewportLeft+a.nodeCentre>=a.tooltipCentre&&a.horizontal_distance>=a.nodeCentre?(d.call(this,a),!0):(a.counter++,!1):(d.call(this,a),!0)}function j(b){return b.counter<=l.length?b.nodeLeft-b.wrapperLeft>b.tooltipWdth&&b.viewportLeft>=b.tooltipWdth&&b.nodeTop-(a(window).scrollTop()+b.wrapperTop)>b.tooltipHt&&b.vertical_distance>=b.tooltipHt?(e.call(this,b),!0):(b.counter++,!1):(e.call(this,b),!0)}function k(b){return b.counter<=l.length?b.nodeTop-b.wrapperTop>b.tooltipHt&&b.nodeTop-(a(window).scrollTop()+b.wrapperTop)>b.tooltipHt&&b.viewportLeft+b.nodeCentre>=b.tooltipCentre&&b.horizontal_distance>=b.nodeCentre?(f.call(this,b),!0):(b.counter++,!1):(f.call(this,b),!0)}var l=["top","right","bottom","left"],m=null,n={list:{},"class":"tooltipDflt",dir:"right",tipWidth:20,tipHeight:20,wrapper:"body",open:{event:"mouseover",anim:""},close:{event:"mouseleave",node:"",anim:""}},o=function(b){this.options=a.extend(!0,{},n,b),0!=b.order.length&&(l=b.order)},p=function(a,b){return"top"==a?k.call(this,b):"right"==a?g.call(this,b):"bottom"==a?h.call(this,b):"left"==a?j.call(this,b):void 0},q=function(b,c){var d=p.call(this,b,c);if(d)return d;{var e=a.inArray(b,l),f=(e+1)%l.length;a.inArray(this.options.dir,l)}q.call(this,l[f],c)},r=function(){var a=this.options.open.event,b=this.options.close.event,c=this.options.close.node,d=this;this.node.on(a,function(){d.open()}),this.node.on(b,function(){var a=0;d.toolTipCont.on("mouseenter",function(){a=1}),setTimeout(function(){a?d.toolTipCont.on("mouseleave",function(){d.close()}):d.close()},100)}),c&&this.node.on("click",c,function(){d.close()})},s={open:function(){var b={};if("undefined"==typeof this.toolTipCont){var c=this.toolTipCont=a('<div class="tooltipContainer">');c.appendTo("body");var d=this.options["class"],e=d.replace(/\,/g," ");c.addClass(e)}a(".tooltipContainer");b.counter=1,b.ttDirection=this.options.dir;var f=this.options.open.anim,g=b.animatnGrp=f.split(",");if(1==g.length)for(i=0;i<3;i++)g.push(f);b.wrapElem=a(this.options.wrapper);var h=b.wrapElem.offset();b.wrapperLeft=h.left,b.wrapperTop=h.top,b.wrapperHt=b.wrapElem.height(),b.wrapperWd=b.wrapElem.width(),b.ttTipWidth=this.options.tipWidth,b.ttTipHeight=this.options.tipHeight;var j=this.node.attr("tooltip"),k=this.options.list[j];a(this.toolTipCont).css("max-width",a(window).width()/2);var c=this.toolTipCont;b.nodeHeight=this.node.outerHeight(),b.nodeWidth=this.node.outerWidth(),b.nodeCentre=this.node.outerWidth()/2;var l=this.node.offset();b.nodeLeft=l.left,b.nodeTop=l.top,c.html(k).show(),b.tooltipHt=c.height(),b.tooltipOuterHt=c.outerHeight(),b.tooltipWdth=c.outerWidth(),b.tooltipCentre=c.outerWidth()/2,b.rigthDir_LeftPos=b.nodeLeft+b.nodeWidth+b.ttTipWidth,b.topDir_topPos=b.nodeTop-b.tooltipOuterHt,b.leftDir_leftPos=b.nodeLeft-b.tooltipWdth-b.ttTipWidth,b.bottomDir_topPos=b.nodeTop+b.nodeHeight;var n=this.node.offset().left,o=this.node.offset().top,p=n+this.node.outerWidth(),r=o+this.node.outerHeight(),s=a(window).width()+a(window).scrollLeft(),t=a(window).height()+a(window).scrollTop();b.viewportLeft=n-a(window).scrollLeft(),b.horizontal_distance=s-p,b.vertical_distance=t-r,q.call(this,b.ttDirection,b),m?m.close():"",c.fadeIn(),m=this},close:function(){this.toolTipCont.hide()}},t=function(a,b){o.call(this,a),this.node=b,r.call(this)};return t.prototype=s,function(b){return a.each(this,function(c,d){if(!a(d).data("tooltip")){var e=new t(b,a(d));a(d).data("tooltip",e)}}),this.data("tooltip")}}(jQuery);